%% Diagram: Rube Goldberg Message Posting
%% Meta: type=workflow; domain=social

direction LR

start["User taps Post"]
a1["Draft Created"]
b1["Spellcheck OK?"]
c1["Attach Media?"]
d1["Compress Media"]
e1["Too Large?"]
f1["Encrypt Media"]
g1["Sign Request"]
h1["Token Valid?"]
i1["Refresh Token"]
j1["Send to PDS"]
k1["PDS Busy?"]
l1["Backoff 100ms"]
m1["Persist Record"]
n1["Emit Event"]
o1["Relay Queue"]
p1["Fanout Budget?"]
q1["Defer Batch"]
r1["Notify Followers"]
s1["Push Success?"]
t1["Retry Exponential"]
u1["Dead Letter"]
v1["Alert Ops"]
w1["Ack Delivery"]
x1["Moderation Flags?"]
y1["Quarantine"]
z1["Human Review"]
aa1["Decision"]
ab1["Release"]
ad1["Tombstone"]
ac1["Index Search"]
ae1["Update Feeds"]
af1["Hot Content?"]
ag1["Precompute Cards"]
ah1["Pin to Trending"]
ai1["Background Recalc"]
end1["Done"]

start --> a1
a1 --> b1
b1 --> c1
b1 --> a1
c1 --> d1
d1 --> e1
e1 --> d1
e1 --> f1
c1 --> f1
f1 --> g1
g1 --> h1
h1 --> i1
h1 --> j1
j1 --> k1
k1 --> l1
l1 --> j1
k1 --> m1
m1 --> n1
n1 --> o1
o1 --> p1
p1 --> q1
q1 --> o1
p1 --> r1
r1 --> s1
s1 --> t1
t1 --> r1
s1 --> u1
u1 --> v1
s1 --> w1
w1 --> x1
x1 --> y1
y1 --> z1
z1 --> aa1
aa1 --> ab1
ab1 --> ac1
aa1 --> ad1
ad1 --> ac1
x1 --> ac1
ac1 --> ae1
ae1 --> af1
af1 --> ag1
ag1 --> ah1
af1 --> ai1
ah1 --> end1
ai1 --> end1
v1 --> end1
