<svg xmlns="http://www.w3.org/2000/svg" width="590" height="4438" viewBox="0 0 590 4438">
  <defs><marker id="arrow" viewBox="0 0 10 10" refX="10" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M0 0 L10 5 L0 10 z" fill="#333"/></marker></defs>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,94.0 295.0,94.0 340.0,94.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="500.0,94.0 295.0,94.0 90.0,212.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,212.0 170.0,212.0 90.0,330.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,212.0 295.0,212.0 340.0,94.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,330.0 170.0,330.0 90.0,448.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,448.0 170.0,448.0 90.0,566.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,566.0 170.0,566.0 90.0,448.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,566.0 170.0,566.0 90.0,684.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,330.0 170.0,330.0 90.0,684.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,684.0 170.0,684.0 90.0,802.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,802.0 170.0,802.0 90.0,920.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,920.0 170.0,920.0 90.0,1038.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,920.0 170.0,920.0 90.0,1156.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,1156.0 170.0,1156.0 90.0,1274.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,1274.0 170.0,1274.0 90.0,1392.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,1392.0 170.0,1392.0 90.0,1156.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,1274.0 170.0,1274.0 90.0,1510.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,1510.0 170.0,1510.0 90.0,1628.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,1628.0 170.0,1628.0 90.0,1746.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,1746.0 170.0,1746.0 90.0,1864.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,1864.0 170.0,1864.0 90.0,1982.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,1982.0 170.0,1982.0 90.0,1746.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,1864.0 170.0,1864.0 90.0,2100.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,2100.0 170.0,2100.0 90.0,2218.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,2218.0 170.0,2218.0 90.0,2336.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,2336.0 170.0,2336.0 90.0,2100.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,2218.0 170.0,2218.0 90.0,2454.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,2454.0 170.0,2454.0 90.0,2572.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,2218.0 170.0,2218.0 90.0,2690.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,2690.0 170.0,2690.0 90.0,2808.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,2808.0 170.0,2808.0 90.0,2926.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,2926.0 170.0,2926.0 90.0,3044.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,3044.0 170.0,3044.0 90.0,3162.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,3162.0 170.0,3162.0 90.0,3280.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,3280.0 170.0,3280.0 90.0,3516.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,3162.0 170.0,3162.0 90.0,3398.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,3398.0 170.0,3398.0 90.0,3516.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,2808.0 170.0,2808.0 90.0,3516.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,3516.0 170.0,3516.0 90.0,3634.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,3634.0 170.0,3634.0 90.0,3752.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,3752.0 170.0,3752.0 90.0,3870.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,3870.0 170.0,3870.0 90.0,3988.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,3752.0 170.0,3752.0 90.0,4106.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,3988.0 170.0,3988.0 90.0,4224.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,4106.0 170.0,4106.0 90.0,4224.0"/>
  <polyline fill="none" stroke="#333" stroke-width="2" marker-end="url(#arrow)" points="250.0,2572.0 170.0,2572.0 90.0,4224.0"/>
  <rect x="90.0" y="70.0" rx="24.0" ry="24.0" width="160.0" height="48.0" fill="#e6ffe6" stroke="#2e7d32"/>
  <text x="170.0" y="94.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">User taps Post</text>
  <rect x="340.0" y="70.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="420.0" y="94.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Draft Created</text>
  <polygon points="170.0,188.0 250.0,212.0 170.0,236.0 90.0,212.0" fill="#fff9c4" stroke="#f9a825"/>
  <text x="170.0" y="212.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Spellcheck OK?</text>
  <polygon points="170.0,306.0 250.0,330.0 170.0,354.0 90.0,330.0" fill="#fff9c4" stroke="#f9a825"/>
  <text x="170.0" y="330.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Attach Media?</text>
  <rect x="90.0" y="424.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="448.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Compress Media</text>
  <polygon points="170.0,542.0 250.0,566.0 170.0,590.0 90.0,566.0" fill="#fff9c4" stroke="#f9a825"/>
  <text x="170.0" y="566.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Too Large?</text>
  <rect x="90.0" y="660.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="684.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Encrypt Media</text>
  <rect x="90.0" y="778.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="802.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Sign Request</text>
  <polygon points="170.0,896.0 250.0,920.0 170.0,944.0 90.0,920.0" fill="#fff9c4" stroke="#f9a825"/>
  <text x="170.0" y="920.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Token Valid?</text>
  <rect x="90.0" y="1014.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="1038.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Refresh Token</text>
  <rect x="90.0" y="1132.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="1156.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Send to PDS</text>
  <polygon points="170.0,1250.0 250.0,1274.0 170.0,1298.0 90.0,1274.0" fill="#fff9c4" stroke="#f9a825"/>
  <text x="170.0" y="1274.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">PDS Busy?</text>
  <rect x="90.0" y="1368.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="1392.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Backoff 100ms</text>
  <rect x="90.0" y="1486.0" width="160.0" height="48.0" fill="#e3f2fd" stroke="#1565c0"/>
  <ellipse cx="170.0" cy="1486.0" rx="80.0" ry="6" fill="#e3f2fd" stroke="#1565c0"/>
  <ellipse cx="170.0" cy="1534.0" rx="80.0" ry="6" fill="#e3f2fd" stroke="#1565c0"/>
  <text x="170.0" y="1510.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Persist Record</text>
  <rect x="90.0" y="1604.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="1628.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Emit Event</text>
  <rect x="90.0" y="1722.0" width="160.0" height="48.0" fill="#e3f2fd" stroke="#1565c0"/>
  <ellipse cx="170.0" cy="1722.0" rx="80.0" ry="6" fill="#e3f2fd" stroke="#1565c0"/>
  <ellipse cx="170.0" cy="1770.0" rx="80.0" ry="6" fill="#e3f2fd" stroke="#1565c0"/>
  <text x="170.0" y="1746.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Relay Queue</text>
  <polygon points="170.0,1840.0 250.0,1864.0 170.0,1888.0 90.0,1864.0" fill="#fff9c4" stroke="#f9a825"/>
  <text x="170.0" y="1864.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Fanout Budget?</text>
  <rect x="90.0" y="1958.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="1982.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Defer Batch</text>
  <rect x="90.0" y="2076.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="2100.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Notify Followers</text>
  <rect x="90.0" y="2194.0" rx="24.0" ry="24.0" width="160.0" height="48.0" fill="#eeeeee" stroke="#424242"/>
  <text x="170.0" y="2218.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Push Success?</text>
  <rect x="90.0" y="2312.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="2336.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Retry Exponential</text>
  <rect x="90.0" y="2430.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffebee" stroke="#c62828"/>
  <text x="170.0" y="2454.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Dead Letter</text>
  <rect x="90.0" y="2548.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="2572.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Alert Ops</text>
  <rect x="90.0" y="2666.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="2690.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Ack Delivery</text>
  <polygon points="170.0,2784.0 250.0,2808.0 170.0,2832.0 90.0,2808.0" fill="#fff9c4" stroke="#f9a825"/>
  <text x="170.0" y="2808.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Moderation Flags?</text>
  <rect x="90.0" y="2902.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="2926.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Quarantine</text>
  <rect x="90.0" y="3020.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="3044.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Human Review</text>
  <rect x="90.0" y="3138.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="3162.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Decision</text>
  <rect x="90.0" y="3256.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="3280.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Release</text>
  <rect x="90.0" y="3374.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="3398.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Tombstone</text>
  <rect x="90.0" y="3492.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="3516.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Index Search</text>
  <rect x="90.0" y="3610.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="3634.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Update Feeds</text>
  <polygon points="170.0,3728.0 250.0,3752.0 170.0,3776.0 90.0,3752.0" fill="#fff9c4" stroke="#f9a825"/>
  <text x="170.0" y="3752.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Hot Content?</text>
  <rect x="90.0" y="3846.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="3870.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Precompute Cards</text>
  <rect x="90.0" y="3964.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="3988.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Pin to Trending</text>
  <rect x="90.0" y="4082.0" rx="6" ry="6" width="160.0" height="48.0" fill="#ffffff" stroke="#333333"/>
  <text x="170.0" y="4106.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Background Recalc</text>
  <rect x="90.0" y="4200.0" rx="24.0" ry="24.0" width="160.0" height="48.0" fill="#eeeeee" stroke="#424242"/>
  <text x="170.0" y="4224.0" font-family="sans-serif" font-size="12" text-anchor="middle" dominant-baseline="middle">Done</text>
  <g id="legend">
    <rect x="20.0" y="4328.0" width="520" height="100" fill="#fafafa" stroke="#bbb"/>
  <rect x="30.0" y="4348.0" rx="15.0" ry="15.0" width="80.0" height="30.0" fill="#e6ffe6" stroke="#2e7d32"/>
    <text x="120.0" y="4363.0" font-family="sans-serif" font-size="12">Start/End</text>
  <polygon points="270.0,4348.0 310.0,4363.0 270.0,4378.0 230.0,4363.0" fill="#fff9c4" stroke="#f9a825"/>
    <text x="320.0" y="4363.0" font-family="sans-serif" font-size="12">Decision</text>
  <rect x="430.0" y="4348.0" rx="6" ry="6" width="80.0" height="30.0" fill="#ffffff" stroke="#333333"/>
    <text x="520.0" y="4363.0" font-family="sans-serif" font-size="12">Process</text>
  <rect x="30.0" y="4388.0" width="80.0" height="30.0" fill="#e3f2fd" stroke="#1565c0"/>
  <ellipse cx="70.0" cy="4388.0" rx="40.0" ry="6" fill="#e3f2fd" stroke="#1565c0"/>
  <ellipse cx="70.0" cy="4418.0" rx="40.0" ry="6" fill="#e3f2fd" stroke="#1565c0"/>
    <text x="120.0" y="4403.0" font-family="sans-serif" font-size="12">Data/Queue</text>
  <rect x="230.0" y="4388.0" rx="6" ry="6" width="80.0" height="30.0" fill="#ffebee" stroke="#c62828"/>
    <text x="320.0" y="4403.0" font-family="sans-serif" font-size="12">Error</text>
  </g>
</svg>
